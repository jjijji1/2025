# app.py
# -*- coding: utf-8 -*-
import math
from typing import List, Tuple

import numpy as np
import pandas as pd
import plotly.graph_objects as go
import streamlit as st

st.set_page_config(page_title="초기 인류 아메리카 최남단 이동 시뮬레이션", layout="wide")

st.title("초기 인류의 아메리카 최남단 이동 시뮬레이션")
st.caption(
    "가정: 약 1만 년 전 초기 인류가 아프리카에서 출발 → 유럽·아시아 경유 → "
    "빙하기의 **베링 해협(육교/빙설면)**을 통해 아메리카로 진입 → 남미 최남단(티에라 델 푸에고) 도달. "
    "요청 조건에 따라 **베링 해협 구간만** 바다 횡단(빙결)을 허용하고, 그 외는 가능한 한 **육상 경로**를 따릅니다."
)

# -----------------------
# 경로 설정 (주요 경유 지점; 바다를 피해 육로로 이어짐, 베링 해협 구간만 예외)
# 위도(lat), 경도(lon) 순서 (북+, 동+)
# -----------------------
WAYPOINTS: List[Tuple[float, float, str]] = [
    # 아프리카 기원(동아프리카 고지대 부근 가정)
    (9.0, 40.0, "아프리카 기원(동아프리카)"),
    (15.0, 32.0, "나일 상류"),
    (30.0, 31.0, "이집트-레반트"),
    # 유럽 측면으로 일부 북상
    (41.0, 28.9, "발칸/보스포루스 인근"),
    (45.0, 20.0, "중앙유럽 남부"),
    (50.0, 14.0, "중앙유럽 북부"),
    # 다시 아시아 심부로 동진
    (48.0, 60.0, "서시베리아"),
    (55.0, 90.0, "시베리아 중앙"),
    (62.0, 120.0, "동시베리아"),
    (66.0, 170.0, "추코트카 동단"),
    # 베링 해협(빙결/육교 가정) — 바다 횡단 허용 구간
    (66.0, -168.0, "베링 해협 건너(알래스카 서북)"),
    # 북미 종단(가능한 육상 경로)
    (64.0, -150.0, "알래스카 내륙"),
    (57.0, -135.0, "브리티시컬럼비아 북부"),
    (49.0, -123.0, "태평양 연안 내륙로"),
    (44.0, -113.0, "로키 산악로"),
    (41.0, -111.0, "그레이트베이슨 동"),
    (37.0, -109.0, "포코노/4코너즈 인근"),
    (33.0, -106.0, "뉴멕시코"),
    (29.0, -104.0, "텍사스 서부"),
    (24.0, -100.0, "멕시코 고원"),
    (20.0, -99.0,  "멕시코 중앙"),
    (17.0, -92.0,  "치아파스/과테말라"),
    (10.0, -84.0,  "코스타리카"),
    (8.5, -79.5,   "파나마 이스무스"),
    # 남미
    (5.0, -75.0,   "콜롬비아 안데스 북부"),
    (-4.0, -79.0,  "에콰도르/페루 북부 안데스"),
    (-12.0, -77.0, "페루 중부"),
    (-16.0, -68.0, "볼리비아 고원"),
    (-23.0, -67.0, "아르헨티나 북서부"),
    (-33.0, -70.0, "중부 칠레/산티아고 인근"),
